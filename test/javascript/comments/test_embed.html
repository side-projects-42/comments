<html>
  <head>
    <title>Comments/Embed Test</title>
    <link rel="stylesheet" href="../qunit.css" type="text/css"/>
    <script src="../qunit.js" type="text/javascript"></script>
    <script src="http://localhost:3000/javascripts/jquery-1.4.2.min.js" type="text/javascript"></script>
    <script src="http://localhost:3000/comments/embed.js" type="text/javascript"></script>
    <script type="text/javascript">
      $(function() {
        obj = $('#comments');
        obj.comments();
        form = obj.find('form');

        test("form creation", function() {
          equals( form.length, 1 );
          equals( form.attr('action'), "http://localhost:3000/comments.xml" );
          equals( form.attr('method'), "post" );
        });

        test("authenticity token", function() {
          token = form.find('input[name=authenticity_token]');
          equals( token.length, 1 );
          equals( token.attr('type'), 'hidden' );
          ok( token.val().match(/^.{44}$/) );
        });

        test("url", function() {
          url = form.find('input[name="comment[url]"]');
          equals( url.length, 1 );
          equals( url.attr('type'), 'hidden' );
          equals( url.val(), document.location.href );
        });

        test("input fields", function() {
          ok( form.find('input[name="comment[name]"][type=text]').length > 0 );
          ok( form.find('textarea[name="comment[body]"]').length > 0 );
          ok( form.find('input[type=submit]').length > 0 );
        });

        test("current comments", function() {
        });
      });
    </script>
  </head>
  <body>
    <h1 id="qunit-header">Comments/Embed Test</h1>
    <h2 id="qunit-banner"></h2>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>

    <div id="comments"></div>
  </body>
</html>
